<div class="animate-fade-in p-6 lg:p-8">
  <!-- Page Header -->
  <div class="flex justify-between items-center mb-8">
    <div>
      <h1 class="text-3xl font-bold text-white">📊 Activity Logs</h1>
      <p class="text-gray-400 mt-2">Track user activities and system team member actions</p>
    </div>
    <button (click)="clearFilters()" class="px-4 py-2 rounded-lg bg-gray-700 hover:bg-gray-600 text-white text-sm font-medium transition">
      🔄 Clear Filters
    </button>
  </div>

  <!-- Filters Section -->
  <div class="bg-gray-800 border border-gray-700 rounded-lg p-6 mb-6">
    <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
      <!-- Search User -->
      <div>
        <label class="block text-sm font-medium text-gray-300 mb-2">Search User</label>
        <input
          type="text"
          [value]="searchUser()"
          (input)="searchUser.set($event.target.value); onFilter()"
          placeholder="Enter email or name..."
          class="w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-gray-100 placeholder-gray-500 focus:outline-none focus:border-purple-500"
        />
      </div>

      <!-- Filter Action -->
      <div>
        <label class="block text-sm font-medium text-gray-300 mb-2">Action</label>
        <select
          [value]="filterAction()"
          (change)="filterAction.set($event.target.value); onFilter()"
          class="w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-gray-100 focus:outline-none focus:border-purple-500"
        >
          <option value="all">All Actions</option>
          <option value="login">Login</option>
          <option value="create">Create</option>
          <option value="update">Update</option>
          <option value="delete">Delete</option>
          <option value="logout">Logout</option>
        </select>
      </div>

      <!-- Filter Entity -->
      <div>
        <label class="block text-sm font-medium text-gray-300 mb-2">Entity Type</label>
        <select
          [value]="filterEntity()"
          (change)="filterEntity.set($event.target.value); onFilter()"
          class="w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-gray-100 focus:outline-none focus:border-purple-500"
        >
          <option value="all">All Entities</option>
          <option value="tenant">Tenant</option>
          <option value="user">User</option>
          <option value="role">Role</option>
          <option value="permission">Permission</option>
        </select>
      </div>

      <!-- Date Range -->
      <div>
        <label class="block text-sm font-medium text-gray-300 mb-2">Date Range</label>
        <select
          [value]="dateRange()"
          (change)="dateRange.set($event.target.value); onFilter()"
          class="w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-gray-100 focus:outline-none focus:border-purple-500"
        >
          <option value="1days">Last 24 Hours</option>
          <option value="7days">Last 7 Days</option>
          <option value="30days">Last 30 Days</option>
          <option value="all">All Time</option>
        </select>
      </div>
    </div>
  </div>

  <!-- Loading State -->
  <div *ngIf="loading()" class="bg-gray-800 border border-gray-700 rounded-lg p-12 text-center">
    <div class="inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"></div>
  </div>

  <!-- Empty State -->
  <div *ngIf="!loading() && activities().length === 0" class="bg-gray-800 border border-gray-700 rounded-lg p-12 text-center">
    <p class="text-4xl mb-3">📋</p>
    <h3 class="text-lg font-semibold text-white">No activities found</h3>
    <p class="text-gray-400 mt-2">Try adjusting your filters or search criteria</p>
  </div>

  <!-- Activities List -->
  <div *ngIf="!loading() && activities().length > 0" class="space-y-3">
    <div *ngFor="let activity of activities()" class="bg-gray-800 border border-gray-700 rounded-lg p-4 hover:border-purple-500 transition-colors">
      <div class="flex items-start justify-between gap-4">
        <!-- Left: Action Info -->
        <div class="flex-1 flex items-start gap-3">
          <div [class]="'px-3 py-2 rounded-lg ' + getActionColor(activity.action)">
            <span class="text-lg">{{ getActionIcon(activity.action) }}</span>
          </div>
          <div class="flex-1 min-w-0">
            <!-- Action & Entity -->
            <div class="flex items-center gap-2 flex-wrap">
              <span class="font-semibold text-white">{{ activity.action | uppercase }}</span>
              <span class="text-gray-400">on</span>
              <span class="text-purple-400">{{ activity.entity_type }}</span>
              <span class="text-gray-600">•</span>
              <span class="text-gray-400 text-sm">{{ formatTimeAgo(activity.created_at) }}</span>
            </div>
            
            <!-- User -->
            <div class="text-sm text-gray-400 mt-1">
              👤 {{ activity.user_email }}
            </div>
            
            <!-- Description -->
            <div class="text-sm text-gray-300 mt-2">
              {{ activity.description }}
            </div>
            
            <!-- IP Address -->
            <div class="text-xs text-gray-500 mt-2">
              🌐 IP: {{ activity.ip_address }}
            </div>
          </div>
        </div>

        <!-- Right: Time -->
        <div class="text-right flex-shrink-0">
          <div class="text-sm text-gray-400">{{ formatDate(activity.created_at) }}</div>
          <button 
            (click)="viewDetails(activity)"
            class="mt-2 text-xs px-2 py-1 rounded bg-gray-700 hover:bg-gray-600 text-purple-400 transition">
            Details →
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
